"use strict";const yearElement=document.getElementById("year");yearElement&&(yearElement.textContent=(new Date).getFullYear());const navLinks=document.getElementById("navLinks"),menuToggleButton=document.querySelector(".menu-toggle"),navContainer=document.querySelector(".nav"),MOBILE_NAV_BREAKPOINT=900;function setMenuState(e){navLinks&&menuToggleButton&&(navLinks.classList.toggle("open",e),menuToggleButton.setAttribute("aria-expanded",e?"true":"false"),document.body.classList.toggle("no-scroll",e))}function handleMenuBlur(){navContainer&&navLinks&&navLinks.classList.contains("open")&&setTimeout(()=>{const e=document.activeElement;navContainer.contains(e)||setMenuState(!1)},0)}window.toggleMenu=function(e){if(!navLinks)return;setMenuState("boolean"==typeof e?e:!navLinks.classList.contains("open"))},menuToggleButton&&navLinks&&(menuToggleButton.setAttribute("aria-controls","navLinks"),menuToggleButton.addEventListener("click",()=>toggleMenu()),menuToggleButton.addEventListener("blur",handleMenuBlur),navLinks.addEventListener("focusout",handleMenuBlur),navLinks.querySelectorAll("a").forEach(e=>{e.addEventListener("click",()=>setMenuState(!1))}),document.addEventListener("keydown",e=>{"Escape"===e.key&&navLinks.classList.contains("open")&&(setMenuState(!1),menuToggleButton.focus())}),window.addEventListener("resize",()=>{window.innerWidth>MOBILE_NAV_BREAKPOINT&&(navLinks.classList.contains("open")||document.body.classList.contains("no-scroll"))&&setMenuState(!1)}));const observerOptions={threshold:.1,rootMargin:"0px 0px -50px 0px"},observer=new IntersectionObserver(e=>{e.forEach(e=>{e.isIntersecting&&e.target.classList.add("active")})},observerOptions);document.querySelectorAll(".reveal").forEach(e=>{observer.observe(e)}),function(){let e=!1,n=[];function t(){n.forEach(e=>{const n=-.2*e.getBoundingClientRect().top;e.style.backgroundPosition=`center ${n}px`})}function o(){const o=window.innerWidth<=900;if(o&&!e){if(n=Array.from(document.querySelectorAll(".image-break")),!n.length)return;e=!0,window.addEventListener("scroll",t,{passive:!0}),t()}else!o&&e&&(e=!1,window.removeEventListener("scroll",t),n.forEach(e=>{e.style.backgroundPosition="center"}),n=[])}window.addEventListener("load",o),window.addEventListener("resize",o)}(),function(){const e=document.getElementById("newsletter-form"),n=document.getElementById("newsletter-email"),t=document.getElementById("newsletter-message");e&&n&&t&&e.addEventListener("submit",e=>{e.preventDefault();const o=n.value.trim();o&&(t.textContent="Sending...",fetch("subscribe.php",{method:"POST",headers:{Accept:"application/json","Content-Type":"application/x-www-form-urlencoded"},body:new URLSearchParams({email:o})}).then(e=>e.json().catch(()=>({}))).then(e=>{e.success?(t.textContent="Welcome to the bloc, you're in ✌️",n.value=""):t.textContent=e.message||"Something went wrong. Please try again."}).catch(()=>{t.textContent="Connection error. Please try again in a moment."}))})}();
