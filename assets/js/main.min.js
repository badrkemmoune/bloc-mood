"use strict";const yearElement=document.getElementById("year");yearElement&&(yearElement.textContent=(new Date).getFullYear());const nav=document.getElementById("navLinks"),menuButton=document.querySelector(".menu-toggle");let menuOpen=!1;function setMenuState(e){nav&&menuButton&&(menuOpen=e,nav.classList.toggle("open",e),menuButton.setAttribute("aria-expanded",e?"true":"false"),menuButton.setAttribute("aria-controls","navLinks"),document.body.classList.toggle("no-scroll",e))}if(window.toggleMenu=function(){setMenuState(!menuOpen)},nav&&menuButton){setMenuState(!1),nav.addEventListener("click",e=>{const t=e.target;t instanceof HTMLElement&&"A"===t.tagName&&setMenuState(!1)}),document.addEventListener("keydown",e=>{"Escape"===e.key&&menuOpen&&setMenuState(!1)});const e=e=>{if(!menuOpen)return;const t=e.relatedTarget;t&&(nav.contains(t)||t===menuButton)||setMenuState(!1)};nav.addEventListener("focusout",e),menuButton.addEventListener("focusout",e)}const observerOptions={threshold:.1,rootMargin:"0px 0px -50px 0px"},observer=new IntersectionObserver(e=>{e.forEach(e=>{e.isIntersecting&&e.target.classList.add("active")})},observerOptions);document.querySelectorAll(".reveal").forEach(e=>{observer.observe(e)}),function(){let e=!1,t=[];function n(){t.forEach(e=>{const t=-.2*e.getBoundingClientRect().top;e.style.backgroundPosition=`center ${t}px`})}function o(){const o=window.innerWidth<=900;if(o&&!e){if(t=Array.from(document.querySelectorAll(".image-break")),!t.length)return;e=!0,window.addEventListener("scroll",n,{passive:!0}),n()}else!o&&e&&(e=!1,window.removeEventListener("scroll",n),t.forEach(e=>{e.style.backgroundPosition="center"}),t=[])}window.addEventListener("load",o),window.addEventListener("resize",o)}(),function(){const e=document.getElementById("newsletter-form"),t=document.getElementById("newsletter-email"),n=document.getElementById("newsletter-message");e&&t&&n&&e.addEventListener("submit",e=>{e.preventDefault();const o=t.value.trim();o&&(n.textContent="Sending...",fetch("subscribe.php",{method:"POST",headers:{Accept:"application/json","Content-Type":"application/x-www-form-urlencoded"},body:new URLSearchParams({email:o})}).then(e=>e.json().catch(()=>({}))).then(e=>{e.success?(n.textContent="Welcome to the bloc, you're in ✌️",t.value=""):n.textContent=e.message||"Something went wrong. Please try again."}).catch(()=>{n.textContent="Connection error. Please try again in a moment."}))})}();